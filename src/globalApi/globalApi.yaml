api:
  applicationApi:
    project:
      onProjectOpen:
        channel: 'project-opened'
        args:
        - data: ProjectConfiguration
      sendProjectItemClicked:
        channel: 'item-clicked'
        args:
        - node: ProjectTreeItem
      onProjectItemClicked:
        channel: 'item-clicked'
        args:
        - node: ProjectTreeItem
      invokeGetAvailableItems:
        channel: 'get-available-items'
        return: (sourcetype)[]
    file:
      sendOpenDefinition:
        channel: 'open-definition'
        args:
        - node: sourcetype
      ondefinitionOpen:
        channel: 'definition-opened'
        args:
        - content: string | null
        - node: OverviewDefinition | SceneDefinition | NpcDefinition | CommonDefinition
      sendSaveMarkdown:
        channel: 'save-markdown'
        args:
        - content: string
        - node: SceneDefinition | OverviewDefinition | CommonDefinition
      sendFileChanged:
        channel: 'file-changed'
        args:
        - node: sourcetype
      onFileChanged:
        channel: 'file-changed'
        args:
        - node: sourcetype
      invokeGetFilePreview:
        channel: 'get-file-preview'
        args:
        - filePath: string
        return: string
      invokeSaveItemImage:
        channel: 'save-item-image'
        args:
        - node: sourcetype
        - imageName: string
        - data: Uint8Array<ArrayBuffer>
        return: string
      invokeGetImageAsBase64:
        channel: 'get-image-as-base64'
        args:
        - path: string
        return: string


    application:
      sendSaveRequest:
        channel: 'invoke-save'
      onSaveRequest:
        channel: 'save-requested'


models:
  ProjectConfiguration:
    overview: OverviewDefinition
    scenes: SceneDefinition[]
    common: CommonDefinition
    npces: NpcDefinition[]
  SceneDefinition:
    type: "'scene'"
    name: string
    file: string
    scenes: SceneDefinition[]
  OverviewDefinition:
    type: "'overview'"
    name: string
    file: string
  CommonDefinition:
    type: "'common'"
    name: string
    file: string
  NpcDefinition:
    type: "'npc'"
    name: string

  ProjectTreeItem:
    children?: ProjectTreeItem[]
    type: nodetype
    source?: sourcetype
enums:
  sourcetype:
    - OverviewDefinition
    - SceneDefinition
    - CommonDefinition
    - NpcDefinition
  nodetype:
    - "'reserved'"
    - "'overview'"
    - "'locations-root'"
    - "'location'"
    - "'npces-root'"
    - "'npc'"
    - "'common'"
