api:
  applicationApi:
    project:
      onProjectOpen:
        channel: 'project-opened'
        args:
        - data: ProjectConfiguration
      sendProjectItemClicked:
        channel: 'item-clicked'
        args:
        - node: ProjectTreeItem
      onProjectItemClicked:
        channel: 'item-clicked'
        args:
        - node: ProjectTreeItem
      invokeGetAvailableItems:
        channel: 'get-available-items'
        return: (OverviewDefinition | SceneDefinition | NpcDefinition | ArtifactDefinition)[]
    file:
      sendOpenMarkdown:
        channel: 'open-markdown'
        args:
        - filePath: string
        - node: SceneDefinition | OverviewDefinition
      onMarkdownOpen:
        channel: 'markdown-opened'
        args:
        - content: string
        - node: SceneDefinition | OverviewDefinition
      sendSaveMarkdown:
        channel: 'save-markdown'
        args:
        - content: string
        - node: SceneDefinition | OverviewDefinition
      sendFileChanged:
        channel: 'file-changed'
        args:
        - node: SceneDefinition | OverviewDefinition
      onFileChanged:
        channel: 'file-changed'
        args:
        - node: SceneDefinition | OverviewDefinition
      invokeGetFilePreview:
        channel: 'get-file-preview'
        args:
        - filePath: string
        return: string
      invokeSaveItemImage:
        channel: 'save-item-image'
        args:
        - node: SceneDefinition | OverviewDefinition
        - imageName: string
        - data: Uint8Array<ArrayBuffer>
        return: string
      invokeGetImageAsBase64:
        channel: 'get-image-as-base64'
        args:
        - path: string
        return: string


    application:
      sendSaveRequest:
        channel: 'invoke-save'
      onSaveRequest:
        channel: 'save-requested'


models:
  ProjectConfiguration:
    overview: OverviewDefinition
    scenes: SceneDefinition[]
    artifacts: ArtifactDefinition[]
    npces: NpcDefinition[]
  SceneDefinition:
    name: string
    file: string
    scenes: SceneDefinition[]
  OverviewDefinition:
    name: string
    file: string
  ArtifactDefinition:
    name: string
    file: string
  NpcDefinition:
    name: string
    file: string
  ProjectTreeItem:
    children?: ProjectTreeItem[]
    path?: string
    type: nodetype
    source?: OverviewDefinition | SceneDefinition
enums:
  sourcetype:
    - OverviewDefinition
    - SceneDefinition
    - ArtifactDefinition
    - NpcDefinition
  nodetype:
    - reserved
    - overview
    - locations-root
    - location
    - npces-root
    - npc
    - artifacts-root
    - artifact
